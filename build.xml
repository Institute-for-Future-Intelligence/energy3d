<?xml version="1.0" encoding="UTF-8"?>
<project name="Energy3D" default="default" basedir="." xmlns:fx="javafx:com.sun.javafx.tools.ant">

	<property name="JAVA_HOME" value="C:\Program Files\Java\jdk1.8.0_45\" />

	<path id="CLASSPATH">
		<pathelement location="C:\Users\Saeid\.m2\repository\org\slf4j\slf4j-api\1.7.7\slf4j-api-1.7.7.jar" />
		<pathelement location="C:\Users\Saeid\.m2\repository\com\yuvimasory\orange-extensions\1.3.0\orange-extensions-1.3.0.jar" />
		<pathelement location="C:\Users\Saeid\.m2\repository\com\google\collections\google-collections\1.0\google-collections-1.0.jar" />
		<pathelement location="C:\Users\Saeid\.m2\repository\org\jdom\jdom2\2.0.5\jdom2-2.0.5.jar" />
		<fileset dir="exe">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="exe/jogl">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="exe/ardor3d">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="exe/poly2tri">
			<include name="**/*.jar" />
		</fileset>
		<pathelement path="classes" />
	</path>

	<property name="build.src.dir" value="src" />
	<property name="build.classes.dir" value="classes" />
	<property name="build.dist.dir" value="dist" />

	<target name="default" depends="clean,compile">

		<taskdef resource="com/sun/javafx/tools/ant/antlib.xml" uri="javafx:com.sun.javafx.tools.ant" classpath=".:${JAVA_HOME}/lib/ant-javafx.jar" />

		<fx:application id="energy3d" name="Energy3D" mainClass="org.concord.energy3d.MainApplication" />

		<fx:resources id="appRes">
			<fx:fileset dir="${build.dist.dir}" includes="energy3d.jar" />
			<fx:fileset dir="exe" includes="**/*.jar" />
			<fx:fileset dir="C:\Users\Saeid\.m2\repository\org\slf4j\slf4j-api\1.7.7" includes="slf4j-api-1.7.7.jar" />
			<fx:fileset dir="C:\Users\Saeid\.m2\repository\com\yuvimasory\orange-extensions\1.3.0" includes="orange-extensions-1.3.0.jar" />
			<fx:fileset dir="C:\Users\Saeid\.m2\repository\com\google\collections\google-collections\1.0" includes="google-collections-1.0.jar" />
			<fx:fileset dir="C:\Users\Saeid\.m2\repository\org\jdom\jdom2\2.0.5" includes="jdom2-2.0.5.jar" />
		</fx:resources>

		<fx:jar destfile="${build.dist.dir}/energy3d.jar">
			<fx:application refid="energy3d" />
			<fx:resources refid="appRes" />
			<fileset dir="${build.classes.dir}" />
		</fx:jar>

		<fx:deploy outdir="${build.dist.dir}" embedJNLP="true" outfile="energy3d" nativeBundles="all" verbose="false">
			<fx:application refId="energy3d" />
			<fx:resources refid="appRes" />
			<fx:info title="Energy3D" vendor="Concord Consortium Inc." />
			<fx:platform basedir="${JAVA_HOME}"/> 
			<fx:preferences shortcut="true" install="false" menu="true"/>
		</fx:deploy>

	</target>

	<target name="clean">
		<mkdir dir="${build.classes.dir}" />
		<mkdir dir="${build.dist.dir}" />

		<delete>
			<fileset dir="${build.classes.dir}" includes="**/*" />
			<fileset dir="${build.dist.dir}" includes="**/*" />
		</delete>

	</target>

	<target name="compile" depends="clean">

		<javac includeantruntime="false" srcdir="${build.src.dir}" destdir="${build.classes.dir}" fork="yes" executable="${JAVA_HOME}/bin/javac" source="1.8" debug="on" classpathref="CLASSPATH">
		</javac>

		<!-- Copy resources to build.classes.dir -->

		<copy todir="${build.classes.dir}">
			<fileset dir="src/main/resources" />
		</copy>

	</target>

</project>